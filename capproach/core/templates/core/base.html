{% load static %}

<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title></title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

	
</head>
<body>

	<div class="modal fade" tabindex="-1" role="dialog" id="modal">
		<div class="modal-dialog" role="document">
			<div class="modal-content"></div>
		</div>
	</div>

	<div class="container py-3">

		<header>
			<div class="d-flex flex-column flex-md-row align-items-center pb-3 mb-4 border-bottom">
				<a href="/" class="d-flex align-items-center text-dark text-decoration-none">
					<span class="fs-4">CApproach</span>
				</a>

				<nav class="d-inline-flex mt-2 mt-md-0 ms-md-auto">
					<a class="me-3 py-2 text-dark text-decoration-none" href="{% url 'contact_list' %}">List Approaches</a>
					<a class="me-3 py-2 text-dark text-decoration-none" href="{% url 'statistics_list' %}">Summary Statistics</a>
					{% if user.is_authenticated %}
					<a class="me-3 py-2 text-dark text-decoration-none" href="{% url 'account_logout' %}">Logout</a>
					{% else %}
					{% endif %}
				</nav>
			</div>

		</header>

		<div class="d-flex flex-column flex-md-row align-items-center pb-3 mb-4">
			<button id="contact-create" class="btn btn-primary btn-lg" type="button" name="button">Add Approach</button>
		</div>


		{% block content %}{% endblock %}

		<footer class="pt-4 my-md-5 pt-md-5 border-top">
			<div class="row">
				<div class="col-6 col-md">
					<h5>About</h5>
					<ul class="list-unstyled text-small">
						<li>Contact: capproach_dev@gmail.com</li>
					</ul>
				</div>
			</div>
		</footer>

	</div>

	<script src="{% static 'assets/js/jquery-3.2.1.min.js' %}"></script>
	<script src="{% static 'assets/js/popper.min.js' %}"></script>
	<script src="{% static 'assets/js/bootstrap.min.js' %}"></script>
	<!-- You can alternatively load the minified version -->
	<script src="{% static 'js/jquery.bootstrap.modal.forms.js' %}"></script>


	<script type="text/javascript">
	
	$(function () {
		$("#contact-create").modalForm({
			formURL: "{% url 'contact_create' %}"
		});

		$(".contact-read").each(function () {
		        $(this).modalForm({formURL: $(this).data("form-url")});
		});

	    $(".contact-delete").each(function () {
	        $(this).modalForm({formURL: $(this).data("form-url"), isDeleteForm: true});
	    });

		var asyncSuccessMessage = [
		"<div ",
		"style='position:fixed;top:0;z-index:10000;width:100%;border-radius:0;' ",
		"class='alert alert-icon alert-success alert-dismissible fade show mb-0' role='alert'>",
		"Success: Gym was updated.",
		"<button type='button' class='close' data-dismiss='alert' aria-label='Close'>",
		"<span aria-hidden='true'>&times;</span>",
		"</button>",
		"</div>",
		"<script>",
		"$('.alert').fadeTo(2000, 500).slideUp(500, function () {$('.alert').slideUp(500).remove();});",
		"<\/script>"
		].join("");

		function updateContactModalForm() {
			$(".contact-update").each(function () {
				$(this).modalForm({
					formURL: $(this).data("form-url"),
					asyncUpdate: true,
					asyncSettings: {
						closeOnSubmit: true,
						successMessage: asyncSuccessMessage,
						dataUrl: "tables/",
						dataElementId: "#contacts",
						dataKey: "table",
						addModalFormFunction: updateContactModalForm
					}
				});
			});
		}
		updateContactModalForm();

		// Read and Delete person buttons open modal with id="modal"
		// The formURL is retrieved from the data of the element
		$(".bs-modal").each(function () {
			$(this).modalForm({formURL: $(this).data("form-url")});
		});

		// Hide message
		$(".alert").fadeTo(2000, 500).slideUp(500, function () {
			$(".alert").slideUp(500);
		});
	});

	</script>

</body>
</html>